   <!DOCTYPE html>
   <html lang="id">
   <head>
       <meta charset="UTF-8">
       <meta name="viewport" content="width=device-width, initial-scale=1.0">
       <title>Polling Lomba Menggambar dan Mewarnai Pesta Gotilon 2025</title>
       <style>
           body {
               font-family: Arial, sans-serif;
               background: linear-gradient(135deg, #6b0a0a, #ff6f00);
               color: white;
               padding: 20px;
           }
           header {
               text-align: center;
               margin-bottom: 20px;
           }
           section {
               margin-bottom: 20px;
               padding: 20px;
               background: rgba(255, 255, 255, 0.1);
               border-radius: 10px;
           }
           button {
               padding: 10px 15px;
               background: #b23105;
               border: none;
               border-radius: 5px;
               color: white;
               cursor: pointer;
           }
           button:hover {
               background: #ff6f00;
           }
           .hidden {
               display: none;
           }
       </style>
   </head>
   <body>
       <header>
           <h1>Polling Lomba Menggambar dan Mewarnai Pesta Gotilon 2025</h1>
       </header>
       <main>
           <section id="respondent-section">
               <h2>Voting Responden</h2>
               <input type="text" id="token-input" placeholder="Masukkan Token">
               <button id="token-verify-btn">Verifikasi Token</button>
               <div id="token-message"></div>
               <div id="contest-choice" class="hidden">
                   <h3>Pilih Lomba</h3>
                   <select id="contest-select">
                       <option value="" disabled selected>-- Pilih Lomba --</option>
                       <option value="Mewarnai">Mewarnai</option>
                       <option value="Menggambar">Menggambar</option>
                   </select>
                   <h4>Pilih Sektor</h4>
                   <select id="sector-select">
                       <option value="" disabled selected>-- Pilih Sektor --</option>
                       <option value="Sektor 1">Sektor 1</option>
                       <option value="Sektor 2">Sektor 2</option>
                       <option value="Sektor 3">Sektor 3</option>
                       <option value="Sektor 4">Sektor 4</option>
                       <option value="Sektor 5">Sektor 5</option>
                       <option value="Sektor 6">Sektor 6</option>
                       <option value="Sektor 7">Sektor 7</option>
                   </select>
                   <button id="vote-submit-btn">Submit Vote</button>
                   <div id="vote-message"></div>
               </div>
           </section>
           <section id="admin-section">
               <h2>Panel Admin</h2>
               <input type="password" id="admin-password-input" placeholder="Password Admin">
               <button id="admin-login-btn">Login</button>
               <div id="admin-login-message"></div>
               <div id="admin-panel" class="hidden">
                   <button id="generate-token-btn">Buat Token Baru</button>
                   <button id="get-tokens-btn">Dapatkan Token</button>
                   <div id="token-list"></div>
                   <button id="get-results-btn">Dapatkan Hasil Voting</button>
                   <div id="results-list"></div>
                   <button id="admin-logout-btn">Logout</button>
               </div>
           </section>
       </main>
       <script>
           const API_URL = 'http://localhost:5000/api';

           document.getElementById('token-verify-btn').addEventListener('click', async () => {
               const token = document.getElementById('token-input').value;
               const response = await fetch(`${API_URL}/tokens`);
               const tokens = await response.json();
               const validToken = tokens.find(t => t.token === token && !t.used);
               if (validToken) {
                   document.getElementById('token-message').textContent = 'Token valid!';
                   document.getElementById('contest-choice').classList.remove('hidden');
               } else {
                   document.getElementById('token-message').textContent = 'Token tidak valid atau sudah digunakan.';
               }
           });

           document.getElementById('vote-submit-btn').addEventListener('click', async () => {
               const token = document.getElementById('token-input').value;
               const contest = document.getElementById('contest-select').value;
               const sector = document.getElementById('sector-select').value;
               const response = await fetch(`${API_URL}/vote`, {
                   method: 'POST',
                   headers: { 'Content-Type': 'application/json' },
                   body: JSON.stringify({ token, contest, sector })
               });
               const result = await response.json();
               document.getElementById('vote-message').textContent = result.message || 'Vote berhasil!';
           });

           document.getElementById('admin-login-btn').addEventListener('click', async () => {
               const password = document.getElementById('admin-password-input').value;
               if (password === 'semutsektor32025') {
                   document.getElementById('admin-panel').classList.remove('hidden');
                   document.getElementById('admin-login-message').textContent = '';
               } else {
                   document.getElementById('admin-login-message').textContent = 'Password salah.';
               }
           });

           document.getElementById('generate-token-btn').addEventListener('click', async () => {
               const token = Math.random().toString(36).substring(2, 10).toUpperCase();
               await fetch(`${API_URL}/tokens`, {
                   method: 'POST',
                   headers: { 'Content-Type': 'application/json' },
                   body: JSON.stringify({ token })
               });
               alert(`Token baru: ${token}`);
           });

           document.getElementById('get-tokens-btn').addEventListener('click', async () => {
               const response = await fetch(`${API_URL}/tokens`);
               const tokens = await response.json();
               document.getElementById('token-list').innerHTML = tokens.map(t => `<div>${t.token} - ${t.used ? 'Sudah dipakai' : 'Belum dipakai'}</div>`).join('');
           });

           document.getElementById('get-results-btn').addEventListener('click', async () => {
               const response = await fetch(`${API_URL}/results`);
               const results = await response.json();
               document.getElementById('results-list').innerHTML = results.map(r => `<div>${r._id.contest} - ${r._id.sector}: ${r.count}</div>`).join('');
           });

           document.getElementById('admin-logout-btn').addEventListener('click', () => {
               document.getElementById('admin-panel').classList.add('hidden');
           });
       </script>
   </body>
   </html>
   
